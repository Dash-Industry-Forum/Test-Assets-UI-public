var App={controller:{},models:{},views:{},utils:{},constants:{},handler:{}};App.handler.Errorhandler=function(){},App.handler.Errorhandler.handleError=function(a){var b=Q.defer();return a.responseText?App.handler.Errorhandler.handleHTTPError(a):App.handler.Errorhandler.handleInputError(a),b.promise},App.handler.Errorhandler.handleHTTPError=function(a){var b,c=App.models.LoginModel.getInstance();switch(a.status){case 400:b=a.responseJSON.err.message;break;case 401:b=a.responseJSON.err.message;break;default:b="An error occured"}App.views.MessageView.renderErrorMessage({message:b}),"jwt expired"===b&&c.logoutUser()},App.handler.Errorhandler.handleInputError=function(a){var b=a.message||"An error occured";App.views.MessageView.renderErrorMessage({message:b})};var BASE_URL="http://127.0.0.1:3000/v1/";App.constants.requestParameter={attribute:{GET:BASE_URL+"attributes",CREATE:BASE_URL+"myattributes",EDIT:BASE_URL+"attributes",DELETE:BASE_URL+"attributes",GET_MULTI:BASE_URL+"attributes",MYLIST:BASE_URL+"myattributes"},attribute_template:{LIST:"template/attribute/list.html",CREATE:"template/attribute/create.html",EDIT:"template/attribute/edit.html",MYLIST:"template/attribute/mylist.html"},featureGroup:{GET:BASE_URL+"featuregroups",CREATE:BASE_URL+"myfeaturegroups",EDIT:BASE_URL+"featuregroups",DELETE:BASE_URL+"featuregroups",GET_MULTI:BASE_URL+"featuregroups",MYLIST:BASE_URL+"myfeaturegroups"},featureGroup_template:{LIST:"template/featuregroup/list.html",CREATE:"template/featuregroup/create.html",EDIT:"template/featuregroup/edit.html",MYLIST:"template/featuregroup/mylist.html",DETAILS:"template/featuregroup/details.html"},feature:{GET:BASE_URL+"features",CREATE:BASE_URL+"myfeatures",EDIT:BASE_URL+"features",DELETE:BASE_URL+"features",GET_MULTI:BASE_URL+"features",MYLIST:BASE_URL+"myfeatures"},feature_template:{LIST:"template/feature/list.html",CREATE:"template/feature/create.html",EDIT:"template/feature/edit.html",MYLIST:"template/feature/mylist.html",DETAILS:"template/feature/details.html"},testcase:{GET:BASE_URL+"testcases",CREATE:BASE_URL+"mytestcases",EDIT:BASE_URL+"testcases",DELETE:BASE_URL+"testcases",GET_MULTI:BASE_URL+"testcases",MYLIST:BASE_URL+"mytestcases"},testcase_template:{LIST:"template/testcase/list.html",CREATE:"template/testcase/create.html",EDIT:"template/testcase/edit.html",MYLIST:"template/testcase/mylist.html",DETAILS:"template/testcase/details.html"},testvector:{GET:BASE_URL+"testvectors",CREATE:BASE_URL+"mytestvectors",EDIT:BASE_URL+"testvectors",DELETE:BASE_URL+"testvectors",GET_MULTI:BASE_URL+"testvectors",MYLIST:BASE_URL+"mytestvectors",GROUPED_LIST:BASE_URL+"testvectors/groupedlist"},testvector_template:{LIST:"template/testvector/list.html",CREATE:"template/testvector/create.html",EDIT:"template/testvector/edit.html",MYLIST:"template/testvector/mylist.html",GROUPED_LIST:"template/testvector/groupedList.html",DETAILS:"template/testvector/details.html"},user:{GET:BASE_URL+"users",CREATE:BASE_URL+"users",EDIT:BASE_URL+"users",DELETE:BASE_URL+"users",GET_MULTI:BASE_URL+"users"},user_template:{LIST:"template/user/list.html",CREATE:"template/user/create.html",EDIT:"template/user/edit.html"},default_template:{INDEX:"template/default/index.html",FAQ:"template/default/faq.html",DISCLAIMER:"template/default/disclaimer.html"},statistic:{SIZE:BASE_URL+"statistics/size",TESTVECTOR_TYPES:BASE_URL+"statistics/testvector/types",TESTCASE_TYPES:BASE_URL+"statistics/testcase/types",FEATURE_TYPES:BASE_URL+"statistics/feature/types",FEATUREGROUP_TYPES:BASE_URL+"statistics/featuregroup/types"},LOGIN_USER:BASE_URL+"users/login",LOGIN_TEMPLATE:"template/login/login.html",ERROR_TEMPLATE:"template/notifications/error.html",SUCCESS_TEMPLATE:"template/notifications/success.html"},App.constants.targetContainer="#mainContainer",App.constants.messageContainer="#messageContainer",App.constants.events={attribute:{CREATE:"createAttribute",DELETE:"deleteAttribute",EDIT:"editAttribute"},featureGroup:{CREATE:"createFeatureGroup",DELETE:"deleteFeatureGroup",EDIT:"editFeatureGroup",TOGGLE_COLUMN:"toggleColumnFeatureGroup"},feature:{CREATE:"createFeature",DELETE:"deleteFeature",EDIT:"editFeature",TOGGLE_COLUMN:"toggleColumnFeature"},testcase:{CREATE:"createTestcase",DELETE:"deleteTestcase",EDIT:"editTestcase",TOGGLE_COLUMN:"toggleColumnTestcase"},testvector:{CREATE:"createTestvector",DELETE:"deleteTestvector",EDIT:"editTestvector",TOGGLE_COLUMN:"toggleColumnTestvector"},user:{CREATE:"createUser",DELETE:"deleteUser",EDIT:"editUser"},LOGIN:"login",DISCLAIMER:"disclaimer"},App.constants.types={FEATURE:"Feature",FEATURE_GROUP:"Feature Group",TESTCASE:"Testcase",TESTVECTOR:"Testvector"},App.constants.pagination={LIMIT:25},App.utils.HTTPUtils={},App.utils.HTTPUtils.get=function(a,b){var c=Q.defer();return $.ajax({method:"GET",url:a,timeout:1e4,beforeSend:function(a){b&&a.setRequestHeader("Authorization","Bearer "+b)}}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise},App.utils.HTTPUtils.post=function(a,b,c){var d=Q.defer();return c=c||null,$.ajax({method:"POST",url:a,type:"json",contentType:"application/json",timeout:1e4,data:JSON.stringify(b),beforeSend:function(a){c&&a.setRequestHeader("Authorization","Bearer "+c)}}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise},App.utils.HTTPUtils.put=function(a,b,c){var d=Q.defer();return c=c||null,$.ajax({method:"PUT",url:a,type:"json",contentType:"application/json",timeout:1e4,data:JSON.stringify(b),beforeSend:function(a){c&&a.setRequestHeader("Authorization","Bearer "+c)}}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise},App.utils.HTTPUtils.delete=function(a,b){var c=Q.defer();return b=b||null,$.ajax({method:"DELETE",url:a,timeout:1e4,beforeSend:function(a){b&&a.setRequestHeader("Authorization","Bearer "+b)}}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise},App.views.MessageView=function(){},App.views.MessageView.renderSuccessMessage=function(a){alertify.success(a.message)},App.views.MessageView.renderErrorMessage=function(a){alertify.error(a.message)};var $BODY=$("body"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");App.views.MainView=function(a){this.type=a},App.views.MainView.prototype.renderList=function(a,b){var c=this;a.printableElems=[],App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].LIST).then(function(d){a=c.getPrintableAttributes(a),a.printableElems=c.formatDate(a.printableElems),c.renderHandlebars(d,a),c.initializeDataTable("datatable",a,b,0)})},App.views.MainView.prototype.renderMyList=function(a,b){var c=this;a.printableElems=[],App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].MYLIST).then(function(d){a=c.getPrintableAttributes(a),a.printableElems=c.formatDate(a.printableElems),c.renderHandlebars(d,a),c.initializeDataTable("datatable",a,b,1)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.views.MainView.prototype.renderCreate=function(a){var b=Q.defer(),c=this;return App.utils.HTTPUtils.get(App.constants.requestParameter[c.type+"_template"].CREATE).then(function(d){c.renderHandlebars(d,a),$("#create-form").parsley().on("form:submit",function(){return EventBus.dispatch(App.constants.events[c.type].CREATE,this,c.getFieldValues()),!1}),b.resolve()}).catch(function(a){App.handler.Errorhandler.handleError(a)}),b.promise},App.views.MainView.prototype.renderEdit=function(a){var b=Q.defer(),c=this;return App.utils.HTTPUtils.get(App.constants.requestParameter[c.type+"_template"].EDIT).then(function(d){c.registerHandlebarsSelectHelper(),c.renderHandlebars(d,a),$("#edit-form").parsley().on("form:submit",function(){return EventBus.dispatch(App.constants.events[c.type].EDIT,this,c.getEditFieldValues()),!1}),b.resolve()}),b.promise},App.views.MainView.prototype.getIdFromHiddenField=function(){return $("#element-id").val()||null},App.views.MainView.prototype.getIdFromButton=function(a){return a.attributes["element-id"].value},App.views.MainView.prototype.getFieldValues=function(){},App.views.MainView.prototype.getEditFieldValues=function(){},App.views.MainView.prototype.renderHandlebars=function(a,b){var c=Handlebars.compile(a);b=b||[],this.render(c(b))},App.views.MainView.prototype.renderLoadingAnimation=function(){this.render('<div class="row" style="margin-top: 200px"><div class="col-sm-4 col-sm-offset-5"><img src="img/loading.svg"></div></div>')},App.views.MainView.prototype.renderDisclaimer=function(){var a=this;App.utils.HTTPUtils.get(App.constants.requestParameter.default_template.DISCLAIMER).then(function(b){a.renderHandlebars(b),$("#disclaimer-agree-button").bind("click",function(){EventBus.dispatch(App.constants.events.DISCLAIMER,this,!0)})})},App.views.MainView.prototype.render=function(a){$(App.constants.targetContainer).html(a),this.setContentHeight()},App.views.MainView.prototype.setContentHeight=function(){$RIGHT_COL.css("min-height",$(window).height());var a=$BODY.outerHeight(),b=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),c=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),d=a<c?c:a;d-=$NAV_MENU.height()+b,$RIGHT_COL.css("min-height",d)},App.views.MainView.prototype.toggleMenuState=function(a){var b=$("#login-menu-link"),c=null;a?(c=a.roles[0]||"",b.html("Logout"),b.attr("href","#logout"),"member"===c?($(".member").show(),$(".admin").hide()):"admin"!==c&&"superuser"!==c||($(".member").show(),$(".admin").show())):(b.html("Login"),b.attr("href","#login"),$(".member").hide(),$(".admin").hide())},App.views.MainView.prototype.setActiveItem=function(a){var b=a[0]||"",c=a[1]||"";$("li").removeClass("current-page"),$('a[href$="'+b+"/"+c+'"]').parent().addClass("current-page")},App.views.MainView.prototype.clearView=function(){$(App.constants.messageContainer).html(""),$(App.constants.targetContainer).html("")},App.views.MainView.prototype.createDatatableFilters=function(a){$("#"+a+" tfoot th").each(function(){var a=$(this).text();$(this).html(a+'<input type="text" placeholder="Search" />')}),$("#filter_columns").append('<select id="select-column-filter" class="selectpicker" data-actions-box="true" multiple data-live-search="true"> </select>'),$("#"+a+" thead th").each(function(a){var b=$(this).text();$("#select-column-filter").append('<option selected class="toggle-vis" uiName="'+b+'" data-column="'+a+'" >'+b+" </option> ")})},App.views.MainView.prototype.addDatatablesSelect=function(a){var b=this;$("#select-column-filter").on("changed.bs.select",function(c,d,e){var f,g,h=!0,i=[];"undefined"!=typeof d?(f=a.column(d),i.push({name:$("#select-column-filter option").eq(d).attr("uiName"),selected:e}),f.visible(!f.visible())):(g=c.target||[],$.each(g,function(b,c){f=a.column(b),h=c.selected,f.visible(h),i.push({name:c.attributes.uiName.value,selected:h})})),EventBus.dispatch(App.constants.events[b.type].TOGGLE_COLUMN,b,{type:b.type,attributes:i})}),a.buttons().container().appendTo("#example_wrapper .col-sm-6:eq(0)")},App.views.MainView.prototype.addDatatablesSearch=function(a,b,c){var d=this;a.columns().every(function(a){var e,f,g=this,h=this.header(),i=!0,j=!1,k=0;for($("input",this.footer()).on("keyup change",function(){g.search()!==this.value&&g.search(this.value).draw()}),e=h.innerText,b.attributes=b.attributes||[];!j&&k<b.attributes.length;)f=b.attributes[k],f.type.toLowerCase()===d.type&&f.uiName===e&&(i=f.shownByDefault,j=!0),k++;(!c[d.type]||c[d.type][e]!==!1)&&(i||c&&c[d.type]&&c[d.type][e])||(g.visible(!1),$("#select-column-filter option").eq(a).prop("selected",!1))}),$(".selectpicker").selectpicker()},App.views.MainView.prototype.initializeDataTable=function(a,b,c,d){var e,f=this;d=d||0,f.createDatatableFilters(a);var g=$("#"+a).DataTable({pageLength:50,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],scrollX:!0,order:[[d,"asc"]],dom:"Bfrtip",buttons:["pageLength","copy","csv","excel"],drawCallback:function(){$(".delete-button").on("click",function(){e=this,alertify.confirm("Delete an element","Are you sure you want to delete the element?",function(){EventBus.dispatch(App.constants.events[f.type].DELETE,f,f.getIdFromButton(e))},function(){alertify.error("Canceled")})})}});f.addDatatablesSelect(g),f.addDatatablesSearch(g,b,c),f.setContentHeight()},App.views.MainView.prototype.setRoute=function(a){window.location.hash=a},App.views.MainView.prototype.registerHandlebarsSelectHelper=function(){Handlebars.registerHelper("select",function(a,b){return b.fn(this).split("\n").map(function(b){var c='value="'+a+'"';return RegExp(c).test(b)?b.replace(c,c+' selected="selected"'):b}).join("\n")})},App.views.MainView.prototype.getPrintableAttributes=function(a){var b,c;return a.entries.forEach(function(d){b={};for(var e in d)d.hasOwnProperty(e)&&"attributes"!==e&&(b[e]=d[e]);b.attributes=[],a.attributes.forEach(function(a){c={attribute:a,value:"Undefined"},d.attributeInstances.forEach(function(b){a._id===b.attribute._id&&(c.value=b.value)}),b.attributes.push(c)}),a.printableElems.push(b)}),a},App.views.MainView.prototype.resizeChart=function(a){$(window).on("resize",function(){null!==a&&void 0!==a&&a.resize()})},App.views.MainView.prototype.formatDate=function(a){var b;return a.map(function(a){a.hasOwnProperty("createdAt")&&(b=new Date(a.createdAt),a.createdAt=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear()),a.hasOwnProperty("updatedAt")&&(b=new Date(a.updatedAt),a.updatedAt=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear())}),a},App.views.AttributeView=function(){App.views.MainView.call(this,"attribute")},App.views.AttributeView.prototype=new App.views.MainView,App.views.AttributeView.prototype.constructor=App.views.AttributeView,App.views.AttributeView.prototype.renderList=function(a,b){var c=this;App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].LIST).then(function(d){a.entries=c.formatDate(a.entries),c.renderHandlebars(d,a),c.initializeDataTable("datatable",a,b,0)})},App.views.AttributeView.prototype.renderMyList=function(a,b){var c,d=this;App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].MYLIST).then(function(e){a.entries=d.formatDate(a.entries),d.renderHandlebars(e,a),d.initializeDataTable("datatable",a,b,1),$(".delete-button").on("click",function(){c=this,alertify.confirm("Delete an element","Are you sure you want to delete the element?",function(){EventBus.dispatch(App.constants.events[d.type].DELETE,d,d.getIdFromButton(c))},function(){alertify.error("Canceled")})})})},App.views.AttributeView.prototype.getFieldValues=function(){var a={};return a.description=$("#description").val(),a.uiName=$("#ui-name").val(),a.type=$("#type-select option:selected").val(),a.active=$("input[name=active]:checked").val(),a.shownByDefault=$("input[name=shown-by-default]:checked").val(),a.defaultValue=$("#default-value").val(),a.deletable=$("input[name=deletable]:checked").val(),a.active="true"===a.active,a.deletable="true"===a.deletable,a.shownByDefault="true"===a.shownByDefault,a},App.views.AttributeView.prototype.getEditFieldValues=function(){var a={},b=this;return a.description=$("#description").val(),a.uiName=$("#ui-name").val(),a.type=$("#type-select option:selected").val(),a.active=$("input[name=active]:checked").val(),a.shownByDefault=$("input[name=shown-by-default]:checked").val(),a.defaultValue=$("#default-value").val(),a.deletable=$("input[name=deletable]:checked").val(),a.active="true"===a.active,a.deletable="true"===a.deletable,a.shownByDefault="true"===a.shownByDefault,a.id=b.getIdFromHiddenField(),a},App.views.AttributeView.prototype.getIdFromHiddenField=function(){return $("#element-id").val()||null},App.views.AttributeView.prototype.getIdFromButton=function(a){return a.attributes["element-id"].value},App.views.DefaultView=function(){App.views.MainView.call(this,"default")},App.views.DefaultView.prototype=new App.views.MainView,App.views.DefaultView.prototype.constructor=App.views.DefaultView,App.views.DefaultView.prototype.renderIndex=function(a){var b=this;App.utils.HTTPUtils.get(App.constants.requestParameter.default_template.INDEX).then(function(c){a=b.setActivities(a),b.renderHandlebars(c,a),b.createDonutTc(a.testcaseTypes),b.createDonutTv(a.testvectorTypes),b.createDonutF(a.featureTypes),b.createDonutTvTcF(a.testvectorTypes)}).catch(function(a){throw new Error(a)})},App.views.DefaultView.prototype.renderFAQ=function(){var a=this;App.utils.HTTPUtils.get(App.constants.requestParameter.default_template.FAQ).then(function(b){a.renderHandlebars(b)})},App.views.DefaultView.prototype.setActivities=function(a){var b=[],c=[],d=this;return a.testvectorTypes.forEach(function(a){d.createActivityEntry(a,"Testvector",b,c)}),a.testcaseTypes.forEach(function(a){d.createActivityEntry(a,"Testcase",b,c)}),a.featureTypes.forEach(function(a){d.createActivityEntry(a,"Feature",b,c)}),a.featureGroupTypes.forEach(function(a){d.createActivityEntry(a,"Feature Group",b,c)}),a.additions=b.sort(this.sortByDate).slice(0,5),a.updates=c.sort(this.sortByDate).slice(0,5),a},App.views.DefaultView.prototype.createActivityEntry=function(a,b,c,d){var e=new Date(1970,1,1),f=new Date(1970,1,1),g=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],h={"Feature Group":"featuregroup",Feature:"feature",Testcase:"testcase",Testvector:"testvector"},i="#"+h[b]+"/details/"+a._id;a.createdAt&&(e=new Date(a.createdAt)),a.updatedAt&&(f=new Date(a.updatedAt)),c.push({type:b,date:{full:e,month:g[e.getMonth()],day:e.getDate()},name:a.name,detailsUrl:i}),d.push({type:b,date:{full:f,month:g[f.getMonth()],day:f.getDate()},name:a.name,detailsUrl:i})},App.views.DefaultView.prototype.sortByDate=function(a,b){return new Date(b.date.full)-new Date(a.date.full)},App.views.DefaultView.prototype.createDonutF=function(a){var b=[],c=[],d=[],e=echarts.init(document.getElementById("donutF"));a=a||[],a.forEach(function(a){b[a.featureGroup._id]?b[a.featureGroup._id].value+=1:b[a.featureGroup._id]={value:1,name:a.featureGroup.name}});for(var f in b)b.hasOwnProperty(f)&&(d.push(b[f].name),c.push(b[f]));var g={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{x:"center",y:"bottom",data:d},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Save Image"}}},calculable:!0,series:[{name:"Features per Feature Group",type:"pie",radius:[25,90],center:["50%",170],roseType:"area",x:"50%",max:40,sort:"ascending",data:c,itemStyle:{normal:{label:{show:!1}}}}]};e.setOption(g),this.resizeChart(e)},App.views.DefaultView.prototype.createDonutTc=function(a){var b=[],c=[],d=[],e=[],f=echarts.init(document.getElementById("donutTc"));a=a||[],a.forEach(function(a){c[a.feature._id]?c[a.feature._id].value+=1:c[a.feature._id]={value:1,name:a.feature.name},b[a.feature.featureGroup._id]?b[a.feature.featureGroup._id].value+=1:b[a.feature.featureGroup._id]={value:1,name:a.feature.featureGroup.name}});for(var g in c)c.hasOwnProperty(g)&&d.push(c[g]);for(var h in b)b.hasOwnProperty(h)&&e.push(b[h]);var i={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"left",data:e},calculable:!1,toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Save Image"}}},series:[{name:"Feature Group",type:"pie",selectedMode:"single",radius:[0,70],x:"20%",width:"40%",funnelAlign:"right",max:1548,itemStyle:{normal:{label:{show:!1}}},data:e},{name:"Feature",type:"pie",radius:[100,140],x:"60%",width:"35%",funnelAlign:"left",max:1048,data:d}]};f.setOption(i),this.resizeChart(f)},App.views.DefaultView.prototype.createDonutTv=function(a){var b=[],c=[],d=[],e=[],f=echarts.init(document.getElementById("donutTv"));a=a||[],a.forEach(function(a){a.testcases.forEach(function(a){c[a.feature._id]?c[a.feature._id].value+=1:c[a.feature._id]={value:1,name:a.feature.name},b[a.feature.featureGroup._id]?b[a.feature.featureGroup._id].value+=1:b[a.feature.featureGroup._id]={value:1,name:a.feature.featureGroup.name}})});for(var g in c)c.hasOwnProperty(g)&&d.push(c[g]);for(var h in b)b.hasOwnProperty(h)&&e.push(b[h]);var i={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"left",data:e},calculable:!1,toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Save Image"}}},series:[{name:"Feature Group",type:"pie",selectedMode:"single",radius:[0,70],x:"20%",width:"40%",funnelAlign:"right",max:1548,itemStyle:{normal:{label:{show:!1}}},data:e},{name:"Feature",type:"pie",radius:[100,140],x:"60%",width:"35%",funnelAlign:"left",max:1048,data:d}]};f.setOption(i),this.resizeChart(f)},App.views.DefaultView.prototype.createDonutTvTcF=function(a){var b=[],c=[],d=echarts.init(document.getElementById("donutTvTcF"));a=a||[],a.forEach(function(a){a.testcases.forEach(function(a){b[a._id]?b[a._id].value+=1:b[a._id]={value:1,name:a.name+"("+a.feature.name+")"}})});for(var e in b)b.hasOwnProperty(e)&&c.push(b[e]);var f={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},calculable:!1,toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Save Image"}}},series:[{name:"Testcase (Feature) ",type:"pie",selectedMode:"single",radius:[0,70],x:"20%",width:"40%",funnelAlign:"right",max:1548,data:c}]};d.setOption(f),this.resizeChart(d)},App.views.FeatureGroupView=function(){App.views.MainView.call(this,"featureGroup")},App.views.FeatureGroupView.prototype=new App.views.MainView,App.views.FeatureGroupView.prototype.constructor=App.views.FeatureGroupView,App.views.FeatureGroupView.prototype.renderDetails=function(a){var b=this;a.featureGroup=b.formatDate([a.featureGroup])[0],a.features=b.formatDate(a.features),a.testcases=b.formatDate(a.testcases),a.testvectors=b.formatDate(a.testvectors),App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].DETAILS).then(function(c){b.renderHandlebars(c,a),b.renderTestvectorChart(a.testvectors)})},App.views.FeatureGroupView.prototype.renderTestvectorChart=function(a){var b=[],c=[],d=echarts.init(document.getElementById("chart"));a=a||[],a.forEach(function(a){a.testcases.forEach(function(a){b[a.feature._id]?b[a.feature._id].value+=1:b[a.feature._id]={value:1,name:a.feature.name}})});for(var e in b)b.hasOwnProperty(e)&&c.push(b[e]);var f={title:{text:"Testvectors per Feature",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:c},calculable:!1,toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Save Image"}}},series:[{name:"Feature",type:"pie",radius:[0,140],x:"60%",width:"35%",funnelAlign:"left",max:1048,itemStyle:{normal:{label:{show:!1}}},data:c}]};d.setOption(f),this.resizeChart(d)},App.views.FeatureGroupView.prototype.getFieldValues=function(){var a={};return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,attribute:c.attributes["attribute-id"].value})}),a},App.views.FeatureGroupView.prototype.getEditFieldValues=function(){var a={},b=this;return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,_id:c.attributes["attribute-instance-id"].value})}),a.id=b.getIdFromHiddenField(),a},App.views.FeatureView=function(){App.views.MainView.call(this,"feature")},App.views.FeatureView.prototype=new App.views.MainView,App.views.FeatureView.prototype.constructor=App.views.FeatureView,App.views.FeatureView.prototype.renderDetails=function(a){var b=this;a.feature=b.formatDate([a.feature])[0],a.testcases=b.formatDate(a.testcases),a.testvectors=b.formatDate(a.testvectors),App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].DETAILS).then(function(c){b.renderHandlebars(c,a),b.renderTestvectorChart(a.testvectors)})},App.views.FeatureView.prototype.renderTestvectorChart=function(a){var b=[],c=[],d=echarts.init(document.getElementById("chart"));a=a||[],a.forEach(function(a){a.testcases.forEach(function(a){b[a._id]?b[a._id].value+=1:b[a._id]={value:1,name:a.name}})});for(var e in b)b.hasOwnProperty(e)&&c.push(b[e]);var f={title:{text:"Testvectors per Testcase",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:c},calculable:!1,toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"Save Image"}}},series:[{name:"Testcase",type:"pie",radius:[0,140],x:"60%",width:"35%",funnelAlign:"left",max:1048,itemStyle:{normal:{label:{show:!1}}},data:c}]};d.setOption(f),this.resizeChart(d)},App.views.FeatureView.prototype.getFieldValues=function(){var a={};return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,attribute:c.attributes["attribute-id"].value})}),a.featureGroup=$("#feature-group-select option:selected").val(),a},App.views.FeatureView.prototype.getEditFieldValues=function(){var a={},b=this;return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,_id:c.attributes["attribute-instance-id"].value})}),a.featureGroup=$("#feature-group-select option:selected").val(),a.id=b.getIdFromHiddenField(),a},App.views.FeatureView.prototype.getIdFromHiddenField=function(){return $("#element-id").val()||null},App.views.FeatureView.prototype.getIdFromButton=function(a){return a.attributes["element-id"].value},App.views.LoginView=function(){App.views.MainView.call(this,"login")},App.views.LoginView.prototype=new App.views.MainView,App.views.LoginView.prototype.constructor=App.views.LoginView,App.views.LoginView.prototype.renderLogin=function(){var a=this;App.utils.HTTPUtils.get(App.constants.requestParameter.LOGIN_TEMPLATE).then(function(b){a.renderHandlebars(b,null),$("#login-form").parsley().on("form:submit",function(){return EventBus.dispatch(App.constants.events.LOGIN,this,a.getFieldValues()),!1})})},App.views.LoginView.prototype.getFieldValues=function(){var a={};return a.username=$("#username").val(),a.password=$("#password").val(),a},App.views.TestcaseView=function(){App.views.MainView.call(this,"testcase")},App.views.TestcaseView.prototype=new App.views.MainView,App.views.TestcaseView.prototype.constructor=App.views.FeatureGroupView,App.views.TestcaseView.prototype.renderDetails=function(a){var b=this;a.testcase=b.formatDate([a.testcase])[0],a.testvectors=b.formatDate(a.testvectors),App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].DETAILS).then(function(c){b.renderHandlebars(c,a)})},App.views.TestcaseView.prototype.getFieldValues=function(){var a={};return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,attribute:c.attributes["attribute-id"].value})}),a.feature=$("#feature-select option:selected").val(),a},App.views.TestcaseView.prototype.getEditFieldValues=function(){var a={},b=this;return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,_id:c.attributes["attribute-instance-id"].value})}),a.feature=$("#feature-select option:selected").val(),a.id=b.getIdFromHiddenField(),a};var IMPORT_MAPPING={"Dash Profile(s)":"profile","MPD type":"mpd_type","@minimumUpdatePeriod":"min_update_period","@timeShiftBufferDepth":"time_shift_buffer_depth","Num Periods":"num_periods","Total duration":"duration","max num. Video Repr.":"max_num_video","max num. Audio Repr.":"max_num_audio","Multi-resolution video":"multi_resolution_video","Max video resolution":"max_video_resolution","mimeType(s)":"mime_types","Video codecs":"video_codec","Audio codecs":"audio_codec",SegmentTemplate:"segment_template",SegmentTemplate$Number$:"segment_template_number",SegmentTemplate$Time$:"segment_template_time","SegmentTemplate@duration":"segment_template_duration","ContentProtection@schemeIdUri":"content_protection_schemeid_uri","EssentialProperty@schemeIdUri":"essential_property_schemeid_uri","UTCTiming@schemeIdUri":"utc_timing_schemeid_uri","InbandEventStream@schemeIdUri":"inband_event_stream_schemeid_uri","cenc:pssh":"cenc_pssh","Max num. BaseURL":"max_num_base_url","SegmentTemplate@presentationTimeOffset":"segment_template_presentation_timeoffset","SegmentBase@presentationTimeOffset":"segment_base_presentation_timeoffset","SupplementalProperty@schemeIdUri":"supplemental_property_scheme_id_uri",UTCTiming:"utc_timing_schemeid_uri","xlink:href":"period_xlink_href","xlink:actuate":"period_xlink_actuate",AssetIdentifier:"asset_identifier","Early Terminated period":"early_terminated_period","Default Content":"default_content"};App.views.TestvectorView=function(){App.views.MainView.call(this,"testvector")},App.views.TestvectorView.prototype=new App.views.MainView,App.views.TestvectorView.prototype.constructor=App.views.TestvectorView,App.views.TestvectorView.prototype.renderCreate=function(a){var b=Q.defer(),c=this;return a.features=c.getTestcasesByFeature(a.testcases),App.utils.HTTPUtils.get(App.constants.requestParameter[c.type+"_template"].CREATE).then(function(d){c.renderHandlebars(d,a),$("#create-form").parsley().on("form:submit",function(){return EventBus.dispatch(App.constants.events[c.type].CREATE,this,c.getFieldValues()),!1}),$("#import-attributes-button").bind("click",function(){c.importAttributes()}),b.resolve()}).catch(function(a){App.handler.Errorhandler.handleError(a)}),b.promise},App.views.TestvectorView.prototype.renderList=function(a,b){var c=this,d={},e=[{data:"testvector"},{data:"featureGroup"},{data:"feature"},{data:"testcase"},{data:"url"},{data:"play"}];a.attributes.forEach(function(a){a.active&&e.push({data:a.uiName})}),a.isAdmin&&e.push({data:"createdAt"},{data:"updatedAt"}),d.columns=e,d.ajax={url:App.constants.requestParameter.testvector.GET},App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].LIST).then(function(e){c.renderHandlebars(e,a),c.initializeDataTableAjax("datatable",a,b,d)})},App.views.TestvectorView.prototype.renderDetails=function(a){var b=this;a.testvector=b.formatDate([a.testvector])[0],App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].DETAILS).then(function(c){b.renderHandlebars(c,a)})},App.views.TestvectorView.prototype.renderGroupedList=function(a,b){var c=this,d={},e=[{data:"testvector"},{data:"featureGroups"},{data:"features"},{data:"testcases"},{data:"url"},{data:"play"}];a.attributes.forEach(function(a){a.active&&e.push({data:a.uiName})}),a.isAdmin&&e.push({data:"createdAt"},{data:"updatedAt"}),d.columns=e,d.ajax={url:App.constants.requestParameter.testvector.GROUPED_LIST},App.utils.HTTPUtils.get(App.constants.requestParameter[this.type+"_template"].GROUPED_LIST).then(function(e){c.renderHandlebars(e,a),c.initializeDataTableAjax("datatable",a,b,d)})},App.views.TestvectorView.prototype.importAttributes=function(){var a,b=$("#url").val(),c=[];""!==b&&App.utils.HTTPUtils.get(b).then(function(b){c=getMPDParameters(b,c),c=c||[],c.forEach(function(b,c,d){IMPORT_MAPPING[b]&&(a=d[c+1],$("#"+IMPORT_MAPPING[b]).val(a))})})},App.views.TestvectorView.prototype.renderEdit=function(a){var b=Q.defer(),c=this;return a.features=c.getTestcasesByFeature(a.testcases),App.utils.HTTPUtils.get(App.constants.requestParameter[c.type+"_template"].EDIT).then(function(d){c.registerHandlebarsSelectHelper(),c.renderHandlebars(d,a),$("#edit-form").parsley().on("form:submit",function(){return EventBus.dispatch(App.constants.events[c.type].EDIT,this,c.getEditFieldValues()),
!1}),$("#import-attributes-button").bind("click",function(){c.importAttributes()}),b.resolve()}),b.promise},App.views.TestvectorView.prototype.registerHandlebarsSelectHelper=function(){Handlebars.registerHelper("select",function(a,b){return b.fn(this).split("\n").map(function(b){return a.forEach(function(a){var c='value="'+a._id+'"';RegExp(c).test(b)&&(b=b.replace(c,c+' selected="selected"'))}),b}).join("\n")})},App.views.TestvectorView.prototype.getFieldValues=function(){var a={};return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.url=$("#url").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,attribute:c.attributes["attribute-id"].value})}),a.testcases=[],$("#testcase-select option:selected").each(function(){a.testcases.push($(this).val())}),a},App.views.TestvectorView.prototype.getEditFieldValues=function(){var a={},b=this;return a.name=$("#name").val(),a.active=$("input[name=active]:checked").val(),a.includeInDashjsJson=$("input[name=json]:checked").val(),a.url=$("#url").val(),a.attributeInstances=[],$(".dynamic-attribute").each(function(b,c){a.attributeInstances.push({value:c.value,_id:c.attributes["attribute-instance-id"].value})}),a.testcases=[],$("#testcase-select option:selected").each(function(){a.testcases.push($(this).val())}),a.id=b.getIdFromHiddenField(),a},App.views.TestvectorView.prototype.getIdFromHiddenField=function(){return $("#element-id").val()||null},App.views.TestvectorView.prototype.getIdFromButton=function(a){return a.attributes["element-id"].value},App.views.TestvectorView.prototype.getTestcasesByFeature=function(a){var b=[],c=[];a.forEach(function(a){b[a.feature.name]||(b[a.feature.name]={data:a.feature,testcases:[]}),b[a.feature.name].testcases.push(a)});for(var d in b)c.push(b[d]);return c},App.views.TestvectorView.prototype.initializeDataTableAjax=function(a,b,c,d){var e=this,f={exportOptions:{format:{body:function(a,b,c,d){return 0===c&&a.indexOf("details")!==-1?a.replace(/<a\b[^>]*>/i,"").replace(/<\/a>/i,""):(a.indexOf("</a>")!==-1&&(a=a.match(/href=([^]*)/)[1],a.indexOf(">Link</a>")&&(a=a.replace(">Link</a>","")),a.indexOf(">Play</a>")&&(a=a.replace(">Play</a>",""))),a)}}}};d=d||{},d.pageLength=50,d.deferRender=!0,d.ajax.dataSrc=function(a){var c=[];return b.isAdmin?a.data:(a&&a.data&&a.data.length&&(c=a.data.filter(function(a){return a.active})),c)},d.lengthMenu=[[10,25,50,-1],[10,25,50,"All"]],d.scrollX=!0,d.dom="Bfrtip",d.buttons=["pageLength",$.extend(!0,{},f,{extend:"copyHtml5"}),$.extend(!0,{},f,{extend:"excelHtml5",fieldSeparator:";"}),$.extend(!0,{},f,{extend:"csvHtml5",fieldSeparator:";"})],d.deferRender=!0,e.createDatatableFilters(a);var g=$("#"+a).DataTable(d);e.addDatatablesSelect(g),e.addDatatablesSearch(g,b,c),e.setContentHeight()},App.views.UserView=function(){App.views.MainView.call(this,"user")},App.views.UserView.prototype=new App.views.MainView,App.views.UserView.prototype.constructor=App.views.UserView,App.views.UserView.prototype.renderList=function(a,b){var c,d=this;App.utils.HTTPUtils.get(App.constants.requestParameter[d.type+"_template"].LIST).then(function(e){d.renderHandlebars(e,a),d.initializeDataTable("datatable",a,b),$(".delete-button").on("click",function(){c=this,alertify.confirm("Delete an element","Are you sure you want to delete the element?",function(){EventBus.dispatch(App.constants.events[d.type].DELETE,d,d.getIdFromButton(c))},function(){alertify.error("Canceled")})})})},App.views.UserView.prototype.getFieldValues=function(){var a={};return a.username=$("#username").val(),a.password=$("#password").val(),a.firstname=$("#firstname").val(),a.lastname=$("#lastname").val(),a.role=$("#role-select option:selected").val(),a.email=$("#email").val(),a.companyname=$("#company-name").val(),a},App.views.UserView.prototype.getEditFieldValues=function(){var a={},b=this;return a.username=$("#username").val(),a.password=$("#password").val(),a.firstname=$("#firstname").val(),a.lastname=$("#lastname").val(),a.role=$("#role-select option:selected").val(),a.email=$("#email").val(),a.companyname=$("#company-name").val(),a.id=b.getIdFromHiddenField(),a},App.views.UserView.prototype.getIdFromHiddenField=function(){return $("#element-id").val()||null},App.views.UserView.prototype.getIdFromButton=function(a){return a.attributes["element-id"].value},function(){var a;App.models.LoginModel=function(){},App.models.LoginModel.getInstance=function(){return a||(a=new App.models.LoginModel),a},App.models.LoginModel.prototype.loginUser=function(a){var b=Q.defer(),c=this;return App.utils.HTTPUtils.post(App.constants.requestParameter.LOGIN_USER,a).then(function(a){c.saveLoginData(a),b.resolve()}).catch(function(a){b.reject(a)}),b.promise},App.models.LoginModel.prototype.logoutUser=function(){localStorage.removeItem("dashtoken"),Cookies.remove("dashtoken")},App.models.LoginModel.prototype.getLoginData=function(){return localStorage.getItem("dashtoken")?$.parseJSON(localStorage.getItem("dashtoken")):Cookies.get("dashtoken")?$.parseJSON(Cookies.get("dashtoken")):null},App.models.LoginModel.prototype.saveLoginData=function(a){localStorage.setItem("dashtoken",JSON.stringify(a)),Cookies.set("dashtoken",JSON.stringify(a))},App.models.LoginModel.prototype.getFilterPreferences=function(){var a,b=this.getLoginData(),c="nouser";return b&&b.username&&(c=b.username),localStorage.getItem("filterPreferences")?(a=$.parseJSON(localStorage.getItem("filterPreferences")),a[c]?a[c]:{}):{}},App.models.LoginModel.prototype.setFilterPreferences=function(a,b){var c,d=this.getLoginData(),e="nouser";d&&d.username&&(e=d.username),localStorage.getItem("filterPreferences")?(c=$.parseJSON(localStorage.getItem("filterPreferences")),c=c||{}):c={},c[e]||(c[e]={}),c[e][a]||(c[e][a]={}),b.forEach(function(b){c[e][a][b.name]=b.selected}),localStorage.setItem("filterPreferences",JSON.stringify(c))},App.models.LoginModel.prototype.getDisclaimer=function(a){var b,c="nouser";return a&&a.username&&(c=a.username),localStorage.getItem("disclaimer")?(b=$.parseJSON(localStorage.getItem("disclaimer")),b[c]?b[c]:null):null},App.models.LoginModel.prototype.setDisclaimer=function(a){var b,c=this.getLoginData(),d="nouser";c&&c.username&&(d=c.username),localStorage.getItem("disclaimer")?(b=$.parseJSON(localStorage.getItem("disclaimer")),b=b||{}):b={},b[d]=a,b[d]||(localStorage.removeItem("disclaimer"),b={},b[d]=a),localStorage.setItem("disclaimer",JSON.stringify(b))},App.models.LoginModel.prototype.getToken=function(){var a=null;return localStorage.getItem("dashtoken")?a=$.parseJSON(localStorage.getItem("dashtoken")).token||null:Cookies.get("dashtoken")&&(a=$.parseJSON(Cookies.get("dashtoken")).token||null),a},App.models.LoginModel.prototype.isAdmin=function(){var a=this.getLoginData();return!!(a&&a.roles&&a.roles.length)&&a.roles.filter(function(a){return"superuser"===a||"admin"===a}).length}}(),App.models.MainModel=function(a){this.loginModel=App.models.LoginModel.getInstance(),this.type=a},App.models.MainModel.prototype.getElements=function(){var a=Q.defer(),b=this.loginModel.getToken(),c=App.constants.requestParameter[this.type].GET_MULTI;return App.utils.HTTPUtils.get(c,b).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.MainModel.prototype.createElements=function(a){var b=Q.defer(),c=this.loginModel.getToken(),d=App.constants.requestParameter[this.type].CREATE;return App.utils.HTTPUtils.post(d,a,c).then(function(){b.resolve()}).catch(function(a){b.reject(a)}),b.promise},App.models.MainModel.prototype.editElement=function(a){var b=Q.defer(),c=this.loginModel.getToken(),d=App.constants.requestParameter[this.type].EDIT;return App.utils.HTTPUtils.put(d+"/"+a.id,a,c).then(function(){b.resolve()}).catch(function(a){b.reject(a)}),b.promise},App.models.MainModel.prototype.deleteElement=function(a){var b=Q.defer(),c=this.loginModel.getToken(),d=App.constants.requestParameter[this.type].DELETE;return App.utils.HTTPUtils.delete(d+"/"+a,c).then(function(){b.resolve()}).catch(function(a){b.reject(a)}),b.promise},App.models.MainModel.prototype.getElementById=function(a){var b=Q.defer(),c=this.loginModel.getToken(),d=App.constants.requestParameter[this.type].GET;return App.utils.HTTPUtils.get(d+"/"+a,c).then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.MainModel.prototype.getMyElements=function(){var a=Q.defer(),b=this.loginModel.getToken(),c=App.constants.requestParameter[this.type].MYLIST;return App.utils.HTTPUtils.get(c,b).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.AttributeModel=function(){App.models.MainModel.call(this,"attribute")},App.models.AttributeModel.prototype=new App.models.MainModel,App.models.AttributeModel.prototype.constructor=App.models.AttributeModel,App.models.FeatureGroupModel=function(){App.models.MainModel.call(this,"featureGroup")},App.models.FeatureGroupModel.prototype=new App.models.MainModel,App.models.FeatureGroupModel.prototype.getAttributes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.attribute.GET_MULTI+"?type="+App.constants.types.FEATURE_GROUP).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.FeatureGroupModel.prototype.getDetails=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.featureGroup.GET+"/"+a+"/details").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.FeatureGroupModel.prototype.getFeatures=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.featureGroup.GET+"/"+a+"/features").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.FeatureGroupModel.prototype.constructor=App.models.FeatureGroupModel,App.models.FeatureModel=function(){App.models.MainModel.call(this,"feature")},App.models.FeatureModel.prototype=new App.models.MainModel,App.models.FeatureModel.prototype.getAttributes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.attribute.GET_MULTI+"?type="+App.constants.types.FEATURE).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.FeatureModel.prototype.getTestcases=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.feature.GET+"/"+a+"/testcases").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.FeatureModel.prototype.getDetails=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.feature.GET+"/"+a+"/details").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.FeatureModel.prototype.constructor=App.models.FeatureModel,function(){"use strict";var a;App.models.StatisticModel=function(){},App.models.StatisticModel.getInstance=function(){return a||(a=new App.models.StatisticModel),a},App.models.StatisticModel.prototype.getSize=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.statistic.SIZE).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.StatisticModel.prototype.getTestvectorTypes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.statistic.TESTVECTOR_TYPES).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.StatisticModel.prototype.getTestcaseTypes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.statistic.TESTCASE_TYPES).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.StatisticModel.prototype.getFeatureTypes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.statistic.FEATURE_TYPES).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.StatisticModel.prototype.getFeatureGroupTypes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.statistic.FEATUREGROUP_TYPES).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise}}(),App.models.TestcaseModel=function(){App.models.MainModel.call(this,"testcase")},App.models.TestcaseModel.prototype=new App.models.MainModel,App.models.TestcaseModel.prototype.getAttributes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.attribute.GET_MULTI+"?type="+App.constants.types.TESTCASE).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.TestcaseModel.prototype.getTestvectors=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.testcase.GET+"/"+a+"/testvectors").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.TestcaseModel.prototype.getDetails=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.testcase.GET+"/"+a+"/details").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.TestcaseModel.prototype.constructor=App.models.TestcaseModel,App.models.TestvectorModel=function(){App.models.MainModel.call(this,"testvector")},App.models.TestvectorModel.prototype=new App.models.MainModel,App.models.TestvectorModel.prototype.getAttributes=function(){var a=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.attribute.GET_MULTI+"?type="+App.constants.types.TESTVECTOR).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise},App.models.TestvectorModel.prototype.getTestvectors=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.testcase.GET+"/"+a+"/testvectors").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.TestvectorModel.prototype.getDetails=function(a){var b=Q.defer();return App.utils.HTTPUtils.get(App.constants.requestParameter.testvector.GET+"/"+a+"/details").then(function(a){b.resolve(a)}).catch(function(a){b.reject(a)}),b.promise},App.models.TestvectorModel.prototype.constructor=App.models.TestvectorModel,App.models.UserModel=function(){App.models.MainModel.call(this,"user")},App.models.UserModel.prototype=new App.models.MainModel,App.models.UserModel.prototype.constructor=App.models.UserModel,App.controller.MainController=function(a,b,c){this.model=a,this.view=b,this.type=c,this.loginModel=App.models.LoginModel.getInstance()},App.controller.MainController.prototype.registerEvents=function(){var a=this;EventBus.addEventListener(App.constants.events[a.type].CREATE,a.onCreateElement.bind(this)),EventBus.addEventListener(App.constants.events[a.type].EDIT,a.onEditElement.bind(this)),EventBus.addEventListener(App.constants.events[a.type].DELETE,a.onDeleteElement.bind(this)),EventBus.addEventListener(App.constants.events[a.type].TOGGLE_COLUMN,a.onToggleColumn.bind(this))},App.controller.MainController.prototype.onToggleColumn=function(a,b){this.loginModel.setFilterPreferences(b.type,b.attributes)},App.controller.MainController.prototype.onCreateElement=function(a,b){var c=this;b.createdby=c.loginModel.getLoginData()._id,c.model.createElements(b).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Created element"}),c.actionCreate()}).catch(function(a){App.handler.Errorhandler.handleError(a),c.actionCreate()})},App.controller.MainController.prototype.onEditElement=function(a,b){var c=this;c.model.editElement(b).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Edited element"}),c.view.setRoute(c.type.toLowerCase()+"/mylist")}).catch(function(a){App.handler.Errorhandler.handleError(a),c.actionEdit()})},App.controller.MainController.prototype.onDeleteElement=function(a,b){var c=this;c.model.deleteElement(b).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Deleted element"}),c.actionMyList()}).catch(function(a){App.handler.Errorhandler.handleError(a),c.actionMyList()})},App.controller.MainController.prototype.handleRequest=function(a){var b,c;switch(b="undefined"!=typeof a[1]?a[1]:"default"){case"list":this.actionList();break;case"groupedList":this.actionGroupedList();break;case"create":this.actionCreate();break;case"edit":c="undefined"!=typeof a[2]?a[2]:null,this.actionEdit(c);break;case"mylist":this.actionMyList();break;case"details":c="undefined"!=typeof a[2]?a[2]:null,this.actionDetail(c);break;default:this.actionList()}},App.controller.MainController.prototype.actionList=function(){var a={},b=this,c=b.loginModel.getFilterPreferences();b.model.getElements().then(function(d){a.entries=d,a.isAdmin=b.loginModel.isAdmin(),b.view.renderList(a,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.MainController.prototype.actionCreate=function(){return this.view.renderCreate()},App.controller.MainController.prototype.actionEdit=function(a){var b=this;a?b.model.getElementById(a).then(function(a){b.view.renderEdit(a)}).catch(function(a){App.handler.Errorhandler.handleError(a)}):App.handler.Errorhandler.handleError(new Error("Invalid ID specified"))},App.controller.MainController.prototype.actionMyList=function(){var a={},b=this,c=b.loginModel.getFilterPreferences();b.model.getMyElements().then(function(d){a.entries=d,a.isAdmin=b.loginModel.isAdmin(),b.view.renderMyList(a,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.MainController.prototype.filterInactiveTestcases=function(a){var b;return b=a.filter(function(a){var b=!1;return!!a.active&&(a.hasOwnProperty("feature")?a.feature.active&&a.feature.hasOwnProperty("featureGroup")&&a.feature.featureGroup.active&&(b=!0):b=!0,b)})},App.controller.MainController.prototype.filterInactiveFeatures=function(a){var b;return b=a.filter(function(a){var b=!1;return!!a.active&&(a.hasOwnProperty("featureGroup")?a.featureGroup.active&&(b=!0):b=!0,b)})},App.controller.MainController.prototype.filterInactiveFeatureGroups=function(a){return a.filter(function(a){return a.active})},App.controller.MainController.prototype.filterInactiveTestvectors=function(a){var b;return b=a.filter(function(a){var b=!1;return!!a.active&&(a.hasOwnProperty("testcases")?a.testcases.forEach(function(a){a.active&&a.hasOwnProperty("feature")&&a.feature.active&&a.feature.hasOwnProperty("featureGroup")&&a.feature.featureGroup.active&&(b=!0)}):b=!0,b)})},App.controller.MainController.prototype.filterData=function(a){var b=this;return a.hasOwnProperty("featureGroups")&&(a.featureGroups=b.filterInactiveFeatureGroups(a.featureGroups)),a.hasOwnProperty("features")&&(a.features=b.filterInactiveFeatures(a.features)),a.hasOwnProperty("testcases")&&(a.testcases=b.filterInactiveTestcases(a.testcases)),a.hasOwnProperty("testvectors")&&(a.testvectors=b.filterInactiveTestvectors(a.testvectors)),a},App.controller.AttributeController=function(){var a=new App.models.AttributeModel,b=new App.views.AttributeView;App.controller.MainController.call(this,a,b,"attribute"),this.registerEvents()},App.controller.AttributeController.prototype=new App.controller.MainController,App.controller.AttributeController.prototype.constructor=App.controller.AttributeController,App.controller.DefaultController=function(){this.view=new App.views.DefaultView,this.statisticModel=App.models.StatisticModel.getInstance()},App.controller.DefaultController.prototype.handleRequest=function(a){var b;switch(b="undefined"!=typeof a[1]?a[1]:"default"){case"faq":this.actionFAQ();break;default:this.actionDefault()}},App.controller.DefaultController.prototype.actionDefault=function(){var a=this,b={},c=[];c.push(this.statisticModel.getTestvectorTypes()),c.push(this.statisticModel.getTestcaseTypes()),c.push(this.statisticModel.getFeatureTypes()),c.push(this.statisticModel.getFeatureGroupTypes()),Q.all(c).then(function(c){b.testvectorTypes=a.filterTestvectors(c[0]),b.testcaseTypes=a.filterTestcases(c[1]),b.featureTypes=a.filterFeatures(c[2]),b.featureGroupTypes=c[3],b.size={featureGroups:b.featureGroupTypes.length,features:b.featureTypes.length,testcases:b.testcaseTypes.length,testvectors:b.testvectorTypes.length},a.view.renderIndex(b)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.DefaultController.prototype.actionFAQ=function(){this.view.renderFAQ()},App.controller.DefaultController.prototype.filterTestvectors=function(a){var b;return b=a.filter(function(a){var b=!1;return a.hasOwnProperty("testcases")?a.testcases.forEach(function(a){a.active&&a.hasOwnProperty("feature")&&a.feature.active&&a.feature.hasOwnProperty("featureGroup")&&a.feature.featureGroup.active&&(b=!0)}):b=!0,b})},App.controller.DefaultController.prototype.filterTestcases=function(a){var b;return b=a.filter(function(a){var b=!1;return a.hasOwnProperty("feature")?a.feature.active&&a.feature.hasOwnProperty("featureGroup")&&a.feature.featureGroup.active&&(b=!0):b=!0,b})},App.controller.DefaultController.prototype.filterFeatures=function(a){var b;return b=a.filter(function(a){var b=!1;return a.hasOwnProperty("featureGroup")?a.featureGroup.active&&(b=!0):b=!0,b})},App.controller.FeatureController=function(){this.model=new App.models.FeatureModel,this.featureGroupModel=new App.models.FeatureGroupModel,this.view=new App.views.FeatureView,App.controller.MainController.call(this,this.model,this.view,"feature"),this.registerEvents()},App.controller.FeatureController.prototype=new App.controller.MainController,App.controller.FeatureController.prototype.actionCreate=function(){var a=this,b=[];b.push(a.model.getAttributes()),b.push(a.featureGroupModel.getElements()),Q.all(b).then(function(b){return a.view.renderCreate({attributes:b[0],featureGroups:b[1]})}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureController.prototype.actionList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getElements().then(function(c){return b.isAdmin=a.loginModel.isAdmin(),b.isAdmin||(c=a.filterInactiveFeatures(c)),b.entries=c,a.model.getAttributes()}).then(function(d){b.attributes=d,a.view.renderList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureController.prototype.actionMyList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getMyElements().then(function(c){return b.entries=c,b.isAdmin=a.loginModel.isAdmin(),a.model.getAttributes()}).then(function(d){b.attributes=d,a.view.renderMyList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureController.prototype.actionDetail=function(a){var b=this;b.model.getDetails(a).then(function(a){a=b.filterData(a),b.view.renderDetails(a)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureController.prototype.onDeleteElement=function(a,b){var c=this;c.model.getTestcases(b).then(function(a){if(a.length>0)throw new Error("Can not delete element since it is referenced in one or more Testcases");return c.model.deleteElement(b)}).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Deleted feature"}),c.actionMyList()}).catch(function(a){App.handler.Errorhandler.handleError(a),c.actionMyList()})},App.controller.FeatureController.prototype.actionEdit=function(a){var b=this,c=[];a?(c.push(b.model.getElementById(a)),c.push(b.featureGroupModel.getElements()),Q.all(c).then(function(a){b.view.renderEdit({element:a[0],featureGroups:a[1]})}).catch(function(a){App.handler.Errorhandler.handleError(a)})):(App.handler.Errorhandler.handleError(new Error("Invalid ID specified")),b.actionList())},App.controller.FeatureController.prototype.constructor=App.controller.FeatureController,App.controller.FeatureGroupController=function(){this.model=new App.models.FeatureGroupModel,this.view=new App.views.FeatureGroupView,App.controller.MainController.call(this,this.model,this.view,"featureGroup"),this.registerEvents()},App.controller.FeatureGroupController.prototype=new App.controller.MainController,App.controller.FeatureGroupController.prototype.actionCreate=function(){var a=this;a.model.getAttributes().then(function(b){return a.view.renderCreate({attributes:b})})},App.controller.FeatureGroupController.prototype.actionList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getElements().then(function(c){return b.isAdmin=a.loginModel.isAdmin(),b.isAdmin||(c=a.filterInactiveFeatureGroups(c)),b.entries=c,a.model.getAttributes()}).then(function(d){b.attributes=d,a.view.renderList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureGroupController.prototype.actionMyList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getMyElements().then(function(c){return b.entries=c,b.isAdmin=a.loginModel.isAdmin(),a.model.getAttributes()}).then(function(d){b.attributes=d,a.view.renderMyList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureGroupController.prototype.actionDetail=function(a){var b=this;b.model.getDetails(a).then(function(a){a=b.filterData(a),b.view.renderDetails(a)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.FeatureGroupController.prototype.onDeleteElement=function(a,b){var c=this;c.model.getFeatures(b).then(function(a){if(a.length>0)throw new Error("Can not delete element since it is referenced in one or more features");return c.model.deleteElement(b)}).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Deleted Feature Group"}),c.actionMyList()}).catch(function(a){App.handler.Errorhandler.handleError(a),c.actionMyList()})},App.controller.FeatureGroupController.prototype.constructor=App.controller.FeatureController,App.controller.LoginController=function(){this.view=new App.views.LoginView,this.model=App.models.LoginModel.getInstance(),this.mainView=new App.views.MainView,this.registerEvents()},App.controller.LoginController.prototype.registerEvents=function(){var a=this;EventBus.addEventListener(App.constants.events.LOGIN,a.onLogin.bind(this))},App.controller.LoginController.prototype.handleRequest=function(a){var b;switch(b="undefined"!=typeof a[0]?a[0]:"default"){case"#login":this.actionLogin();break;case"#logout":this.actionLogout()}},App.controller.LoginController.prototype.actionLogin=function(){this.model.getLoginData()||this.view.renderLogin()},App.controller.LoginController.prototype.actionLogout=function(){this.model.logoutUser(),App.views.MessageView.renderSuccessMessage({message:"Logged out"}),this.mainView.setRoute("login")},App.controller.LoginController.prototype.onLogin=function(a,b){var c=this;c.model.loginUser(b).then(function(){App.views.MessageView.renderSuccessMessage({message:"Logged in"}),c.mainView.setRoute("")}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestcaseController=function(){this.model=new App.models.TestcaseModel,this.featureModel=new App.models.FeatureModel,this.view=new App.views.TestcaseView,App.controller.MainController.call(this,this.model,this.view,"testcase"),this.registerEvents()},App.controller.TestcaseController.prototype=new App.controller.MainController,App.controller.TestcaseController.prototype.actionCreate=function(){var a=this,b=[];b.push(a.model.getAttributes()),b.push(a.featureModel.getElements()),Q.all(b).then(function(b){return a.view.renderCreate({attributes:b[0],features:b[1]})}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestcaseController.prototype.actionList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getElements().then(function(c){return b.isAdmin=a.loginModel.isAdmin(),b.isAdmin||(c=a.filterInactiveTestcases(c)),b.entries=c,a.model.getAttributes()}).then(function(d){b.attributes=d,a.view.renderList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestcaseController.prototype.actionEdit=function(a){var b=this,c=[];a?(c.push(b.model.getElementById(a)),c.push(b.featureModel.getElements()),Q.all(c).then(function(a){b.view.renderEdit({element:a[0],features:a[1]})}).catch(function(a){App.handler.Errorhandler.handleError(a)})):(App.handler.Errorhandler.handleError(new Error("Invalid ID specified")),b.actionList())},App.controller.TestcaseController.prototype.actionMyList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getMyElements().then(function(c){return b.entries=c,b.isAdmin=a.loginModel.isAdmin(),a.model.getAttributes()}).then(function(d){b.attributes=d,a.view.renderMyList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestcaseController.prototype.actionDetail=function(a){var b=this;b.model.getDetails(a).then(function(a){a=b.filterData(a),b.view.renderDetails(a)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestcaseController.prototype.onDeleteElement=function(a,b){var c=this;c.model.getTestvectors(b).then(function(a){if(a.length>0)throw new Error("Can not delete element since it is referenced in one or more Testvectors");return c.model.deleteElement(b)}).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Deleted Testcase"}),c.actionMyList()}).catch(function(a){App.handler.Errorhandler.handleError(a),c.actionMyList()})},App.controller.TestcaseController.prototype.constructor=App.controller.TestcaseController,App.controller.TestvectorController=function(){this.model=new App.models.TestvectorModel,this.testcaseModel=new App.models.TestcaseModel,this.view=new App.views.TestvectorView,App.controller.MainController.call(this,this.model,this.view,"testvector"),this.registerEvents()},App.controller.TestvectorController.prototype=new App.controller.MainController,App.controller.TestvectorController.prototype.actionCreate=function(){var a=this,b=[];b.push(a.model.getAttributes()),b.push(a.testcaseModel.getElements()),Q.all(b).then(function(b){return a.view.renderCreate({attributes:b[0],testcases:b[1]})}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestvectorController.prototype.actionList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getAttributes().then(function(d){b.attributes=d,b.isAdmin=a.loginModel.isAdmin(),a.view.renderList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestvectorController.prototype.actionMyList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getMyElements().then(function(c){return b.entries=c,a.model.getAttributes()}).then(function(d){b.attributes=d,b.isAdmin=a.loginModel.isAdmin(),a.view.renderMyList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestvectorController.prototype.actionDetail=function(a){var b=this;b.model.getDetails(a).then(function(a){a=b.filterData(a),b.view.renderDetails(a)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestvectorController.prototype.actionEdit=function(a){var b=this,c=[];a?(c.push(b.model.getElementById(a)),c.push(b.testcaseModel.getElements()),Q.all(c).then(function(a){b.view.renderEdit({element:a[0],testcases:a[1]})}).catch(function(a){App.handler.Errorhandler.handleError(a)})):(App.handler.Errorhandler.handleError(new Error("Invalid ID specified")),b.actionList())},App.controller.TestvectorController.prototype.actionGroupedList=function(){var a=this,b={},c=a.loginModel.getFilterPreferences();a.model.getAttributes().then(function(d){b.attributes=d,b.isAdmin=a.loginModel.isAdmin(),a.view.renderGroupedList(b,c)}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.TestvectorController.prototype.onDeleteElement=function(a,b){var c=this;c.model.deleteElement(b).then(function(){c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Deleted Testvector"}),c.actionMyList()}).catch(function(a){
App.handler.Errorhandler.handleError(a),c.actionMyList()})},App.controller.TestvectorController.prototype.constructor=App.controller.TestvectorController,App.controller.UserController=function(){var a=new App.models.UserModel,b=new App.views.UserView;App.controller.MainController.call(this,a,b,"user"),this.registerEvents()},App.controller.UserController.prototype=new App.controller.MainController,App.controller.UserController.prototype.onEditElement=function(a,b){var c=this;c.model.editElement(b).then(function(){return c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Edited element"})}).then(function(){c.view.setRoute(c.type.toLowerCase()+"/list")}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.UserController.prototype.onDeleteElement=function(a,b){var c=this;c.model.deleteElement(b).then(function(){return c.view.clearView(),App.views.MessageView.renderSuccessMessage({message:"Deleted User"})}).then(function(){c.actionList()}).catch(function(a){App.handler.Errorhandler.handleError(a)})},App.controller.UserController.prototype.constructor=App.controller.UserController,App.Router=function(){this.featureController=new App.controller.FeatureController,this.attributeController=new App.controller.AttributeController,this.loginController=new App.controller.LoginController,this.featureGroupController=new App.controller.FeatureGroupController,this.testcaseController=new App.controller.TestcaseController,this.testvectorController=new App.controller.TestvectorController,this.defaultController=new App.controller.DefaultController,this.userController=new App.controller.UserController,this.helperView=new App.views.MainView,this.loginModel=App.models.LoginModel.getInstance()},App.Router.prototype.init=function(){this.registerEventHandler()},App.Router.prototype.registerEventHandler=function(){var a=this;$(window).on("hashchange",function(){a.startupRoutine()}),$(window).on("load",function(){a.startupRoutine()}),EventBus.addEventListener(App.constants.events.DISCLAIMER,a.onDisclaimerAgree.bind(this))},App.Router.prototype.onDisclaimerAgree=function(a,b){var c=this;c.loginModel.setDisclaimer(b),c.defaultController.handleRequest("")},App.Router.prototype.startupRoutine=function(){this.route(decodeURI(window.location.hash))},App.Router.prototype.route=function(a){var b,c=this,d=a.split("/"),e=c.loginModel.getLoginData();if(b=c.loginModel.getDisclaimer(e),c.helperView.toggleMenuState(e),c.helperView.setActiveItem(d),b&&"false"!==b)switch(c.helperView.renderLoadingAnimation(),d[0]){case"#featuregroup":c.featureGroupController.handleRequest(d);break;case"#feature":c.featureController.handleRequest(d);break;case"#testcase":c.testcaseController.handleRequest(d);break;case"#testvector":c.testvectorController.handleRequest(d);break;case"#attribute":c.attributeController.handleRequest(d);break;case"#user":c.userController.handleRequest(d);break;case"#login":c.loginController.handleRequest(d);break;case"#logout":c.loginController.handleRequest(d);break;default:c.defaultController.handleRequest(d)}else c.helperView.renderDisclaimer()};